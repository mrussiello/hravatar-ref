<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ref="http://xmlns.jcp.org/jsf/composite/ref"
      xmlns:misc="http://xmlns.jcp.org/jsf/composite/misc">
    <body>

        <ui:composition template="#{corpBean.template}">

            <ui:define name="titletag">
                <title><h:outputText rendered="#{not refBean.isMrf}" value="#{stMessages['ttl.RcChk']} #{stMessages['ttl.Reference']}"/>
                    <h:outputText rendered="#{refBean.isMrf}" value="#{stMessages['ttl.Mrf']} #{stMessages['ttl.Reference']}"/></title>
            </ui:define>      


            <ui:define name="headspec">
                <style>
                    .pincolclass
                    {
                        vertical-align: middle;
                    }

                    .refinputtextname
                    {
                        width:100%;
                        max-width:200px;
                    }

                    .refinputtext
                    {
                        width:100%;
                        max-width:300px;

                    }

                    .reflabelcol
                    {
                        vertical-align:top;
                    }

                    @media(max-width: 800px)
                    {
                        .reffieldreqd
                        {
                            display:none;
                        }

                        .refinfobubble
                        {
                            display:none;
                        }

                        .refdatepicker
                        {
                            margin-top:2px;
                            margin-bottom:2px;
                        }
                    }

                    @media(max-width: 620px)
                    {

                        .reflabel
                        {
                            display:none;
                        }

                        .reffieldreqd
                        {
                            display:none;
                        }

                        .refinfobubble
                        {
                            display:none;
                        }

                        .refdatepicker
                        {
                            margin-top:2px;
                            margin-bottom:2px;
                            padding-top:0px;
                            padding-bottom:0px;
                        }
                    }



                </style> 
                <script type="text/javascript">
                    //<![CDATA[

                    var exitBeaconUrl = '/tr/coreexit.xhtml?rc=#{refBean.rcCheck.rcCheckIdEncrypted}&amp;ac=#{refBean.activeAccessCodeX}';

                    function doLocalPageOnload()
                    {

                    }

                    function doLocalPageOnUnload()
                    {
                    }

                    window.addEventListener('load', function () {
                        doLocalPageOnload();
                    });
                    window.addEventListener('beforeunload', function () {
                        doLocalPageOnUnload();
                    });


                    // ]]>        
                </script>
            </ui:define>

            <ui:define name="coreinnersection">

                <br style="clear:both"/>

                <div style="padding-left:10px;padding-right:10px;max-width:800px;margin:0px auto;text-align:center">
                    <h:form prependId="false">

                        <ref:stdforminputs />
                        <ref:candidateforminputs />

                        <ref:messages-embedded />

                        <h1 class="pagetitle ttboldtitle">
                            <h:outputFormat rendered="#{candidateRefBean.rcRater.rcRaterId gt 0}" value="#{stMessages['g.XCEditReference']}">
                                <f:param value="#{refUtils.rcCheckRaterName}"/>
                            </h:outputFormat>
                            <h:outputFormat rendered="#{candidateRefBean.rcRater.rcRaterId le 0}" value="#{stMessages['g.XCCreateReference']}">
                                <f:param value="#{refUtils.rcCheckRaterName}"/>
                            </h:outputFormat>
                        </h1>


                        <h:panelGrid columns="3" columnClasses="pincolclass reflabelcol,pincolclass,pincolclass" cellpadding="6" style="padding-top:10px;padding-bottom:10px;margin:0 auto">

                            <h:outputText styleClass="ttformtext reflabel" value="#{stMessages['g.FirstName']}:"/>
                            <h:panelGroup style="white-space:nowrap">
                                <p:inputText id="rffirstname" styleClass="refinputtextname" size="18" value="#{candidateRefBean.rcRater.user.firstName}" maxlength="250" placeholder="#{stMessages['g.FirstName']}"/>
                                <p:outputLabel styleClass="sr-only" value="#{stMessages['g.FirstName']}" for="rffirstname"/>
                                <span class="reffieldreqd">                    
                                    &#160;
                                    <h:outputText style="color:#e30000;font-weight:bold" value="*"/>
                                </span>
                            </h:panelGroup>
                            <h:panelGroup></h:panelGroup>

                            <h:outputText styleClass="ttformtext reflabel" value="#{stMessages['g.LastName']}:"/>
                            <h:panelGroup style="white-space:nowrap">
                                <p:inputText id="rflastname" styleClass="refinputtextname" size="18" value="#{candidateRefBean.rcRater.user.lastName}" maxlength="250" placeholder="#{stMessages['g.LastName']}"/>
                                <p:outputLabel styleClass="sr-only" value="#{stMessages['g.LastName']}" for="rflastname"/>
                                <span class="reffieldreqd">                    
                                    &#160;
                                    <h:outputText style="color:#e30000;font-weight:bold" value="*"/>
                                </span>
                            </h:panelGroup>
                            <h:panelGroup></h:panelGroup>

                            <p:outputLabel styleClass="ttformtext reflabel" value="#{stMessages['g.Email']}:" for="rfemailtb"/>
                            <h:panelGroup style="white-space:nowrap">
                                <p:inputText id="rfemailtb" styleClass="refinputtext" size="30" value="#{candidateRefBean.rcRater.user.email}" maxlength="250" placeholder="#{stMessages['g.Email']}"/>
                                <span class="reffieldreqd">                    
                                    &#160;
                                    <h:outputText style="color:#e30000;font-weight:bold" value="*"/>
                                </span>
                            </h:panelGroup>
                            <h:panelGroup></h:panelGroup>

                            <p:outputLabel styleClass="ttformtext reflabel" value="#{stMessages['g.MobilePhone']}:" for="rfrefmobile"/>
                            <p:inputText id="rfrefmobile" styleClass="refinputtext" size="30" value="#{candidateRefBean.rcRater.user.mobilePhone}" maxlength="79" placeholder="#{stMessages['g.MobilePhone']}"/>
                            <h:panelGroup></h:panelGroup>

                            <h:panelGroup rendered="#{refBean.rcCheck.candidateOneRaterNoSendB and (refBean.rcCheck.noSendRaterCount le 0 or candidateRefBean.rcRater.raterNoSendB)}"></h:panelGroup>
                            <h:panelGroup rendered="#{refBean.rcCheck.candidateOneRaterNoSendB and (refBean.rcCheck.noSendRaterCount le 0 or candidateRefBean.rcRater.raterNoSendB)}">
                                <p:selectBooleanCheckbox id="rfrefnosendbx" disabled="#{candidateRefBean.rcRater.raterNoSendB}" value="#{candidateRefBean.rcRater.raterNoSendB}" />
                                &#160;
                                <p:outputLabel styleClass="ttformtext" value="#{stMessages['g.XCNoSend']}" for="rfrefnosendbx"/>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{refBean.rcCheck.candidateOneRaterNoSendB and (refBean.rcCheck.noSendRaterCount le 0 or candidateRefBean.rcRater.raterNoSendB)}">
                                <div class="refinfobubble">
                                    <misc:infobubble theDivId="nosendraterinfodiv" theText="#{stMessages['g.XCNoSendReferencesAllowed']}"/>
                                </div>
                            </h:panelGroup>

                            <p:outputLabel styleClass="ttformtext reflabel" value="#{stMessages['g.Role']}:" for="rfrefrole"/>
                            <h:panelGroup style="white-space:nowrap">
                                <p:selectOneMenu id="rfrefrole" styleClass="refinputtext" value="#{candidateRefBean.rcRater.rcRaterRoleTypeId}" title="#{stMessages['g.Role']}, #{stMessages['g.UseAltDown4List']}">
                                    <f:selectItems value="#{candidateRefUtils.rcRaterRoleTypeSelectItemList}"/>
                                </p:selectOneMenu>
                                <span class="reffieldreqd">                    
                                    &#160;
                                    <h:outputText style="color:#e30000;font-weight:bold" value="*"/>
                                </span>
                            </h:panelGroup>
                            <h:panelGroup>
                                <div class="refinfobubble">
                                    <misc:infobubble theDivId="raterroleinfodiv" theText="#{stMessages['g.RoleInfo']}"/>
                                </div>
                            </h:panelGroup>

                            <p:outputLabel rendered="#{refBean.rcCheck.rcCheckType.isPrehire}" styleClass="ttformtext reflabel" value="#{stMessages['g.RCCompanyName']}:" for="refcompanyname"/>
                            <h:panelGroup rendered="#{refBean.rcCheck.rcCheckType.isPrehire}">
                                <p:inputText id="refcompanyname" styleClass="refinputtext" value="#{candidateRefBean.rcRater.companyName}" size="30" required="true" requiredMessage="#{stMessages['g.RCCompanyNameReqd']}" placeholder="#{stMessages['g.RCCompanyName']}"/>
                                <span class="reffieldreqd">                    
                                    &#160;
                                    <h:outputText style="color:#e30000;font-weight:bold" value="*"/>
                                </span>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{refBean.rcCheck.rcCheckType.isPrehire}">
                                <div class="refinfobubble">
                                    <misc:infobubble theDivId="companynameinfo" theText="#{stMessages['g.RCCompanyNameInfo']}"/>
                                </div>
                            </h:panelGroup>


                            <h:outputText styleClass="ttformtext reflabel" value="#{stMessages['g.RCObservationPeriod']}:"/>
                            <h:panelGroup>
                                <h:panelGrid columns="2" cellpadding="2" style="margin-left: 0">

                                    <p:outputLabel styleClass="ttformtext" value="#{stMessages['g.From']}:" for="reffrmfrom"/>
                                    <p:datePicker id="reffrmfrom" styleClass="refdatepicker" view="month" pattern="MM/yyyy" yearNavigator="true" showOnFocus="false" showIcon="true" size="8" yearRange="1980:#{candidateRefBean.currentYear}" value="#{candidateRefBean.rcRater.observationStartDate}" placeholder="MM/YYYY" required="false" requiredMessage="#{stMessages['g.RCObservationPeriodRqd']}"/>
                                    <p:outputLabel styleClass="ttformtext" value="#{stMessages['g.to']}:" for="refformto"/>
                                    <h:panelGroup>
                                        <p:datePicker id="refformto" styleClass="refdatepicker" view="month" pattern="MM/yyyy" yearNavigator="true" showOnFocus="false" showIcon="true" size="8" yearRange="1980:#{candidateRefBean.currentYear}" value="#{candidateRefBean.rcRater.observationEndDate}" placeholder="MM/YYYY"  required="false" requiredMessage="#{stMessages['g.RCObservationPeriodEndRqd']}"/>
                                        <span class="reffieldreqd">                    
                                            &#160;
                                            <h:outputText style="color:#e30000;font-weight:bold" value="*"/>
                                        </span>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </h:panelGroup>
                            <h:panelGroup>
                                <div class="refinfobubble">
                                    <misc:infobubble theDivId="observationdatesinfo" theText="#{stMessages['g.RCObservationPeriodInfo']}"/>
                                </div>
                            </h:panelGroup>

                            <p:outputLabel styleClass="ttformtext reflabel" value="#{stMessages['g.Country']}:" for="rfrefcountrycode"/>
                            <h:panelGroup style="white-space:nowrap">
                                <p:selectOneMenu id="rfrefcountrycode" value="#{candidateRefBean.rcRater.user.countryCode}" title="#{stMessages['g.Country']}, #{stMessages['g.UseAltDown4List']}">
                                    <f:selectItems value="#{candidateRefUtils.countryCodeSelectItemList}"/>
                                </p:selectOneMenu>
                                <span class="reffieldreqd">                    
                                    &#160;
                                    <h:outputText style="color:#e30000;font-weight:bold" value="*"/>
                                </span>
                            </h:panelGroup>
                            <h:panelGroup>
                                <div class="refinfobubble">
                                    <misc:infobubble theDivId="countryinfodiv" theText="#{stMessages['g.CountryInfo']}"/>
                                </div>
                            </h:panelGroup>

                            <p:outputLabel rendered="#{refBean.rcCheck.rcCheckType.isPrehire}" styleClass="ttformtext reflabel" value="#{stMessages['g.XCRoleResp4Rater']}:" for="candroleresptb"/>
                            <h:panelGroup rendered="#{refBean.rcCheck.rcCheckType.isPrehire}">
                                <p:inputTextarea id="candroleresptb" rows="3" cols="30" maxlength="1999" style="width:90%;max-width:450px" autoResize="true" value="#{candidateRefBean.rcRater.candidateRoleResp}" placeholder="#{stMessages['g.XCRoleResp4Rater']}" required="true" requiredMessage="#{stMessages['g.XCRoleResp4RaterReqd']}"/>
                                <span class="reffieldreqd">                    
                                    &#160;
                                    <h:outputText style="color:#e30000;font-weight:bold" value="*"/>
                                </span>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{refBean.rcCheck.rcCheckType.isPrehire}">
                                <div class="refinfobubble">
                                    <misc:infobubble theDivId="randrolerespinfo" theText="#{stMessages['g.XCRoleResp4RaterInfo']}"/>
                                </div>
                            </h:panelGroup>



                            <h:panelGroup></h:panelGroup>  
                            <h:panelGroup>
                                <div style="text-align: center">
                                    <div style="display:inline-block">

                                        <p:commandButton style="margin-bottom:5px" rendered="#{candidateRefBean.rcRater.rcRaterId gt 0 or refBean.hasUnconvertedAvMediaForReview}" ajax="false" action="#{candidateRefUtils.processSaveRater}" value="#{stMessages['g.Save']}">
                                            <f:setPropertyActionListener target="#{candidateRefUtils.booleanParam1}" value="false"/>
                                        </p:commandButton>
                                        <p:commandButton style="margin-bottom:5px" rendered="#{candidateRefBean.rcRater.rcRaterId le 0 and not refBean.hasUnconvertedAvMediaForReview and (not refBean.rcCheck.candidateOneRaterNoSendB or refBean.rcCheck.noSendRaterCount ge 1)}" ajax="false" action="#{candidateRefUtils.processSaveRater}" value="#{stMessages['g.XCSendInvitation']}" title="#{stMessages['g.XCSendInvitationInfo']}">
                                            <f:setPropertyActionListener target="#{candidateRefUtils.booleanParam1}" value="true"/>
                                        </p:commandButton>
                                        <p:commandButton style="margin-bottom:5px" rendered="#{candidateRefBean.rcRater.rcRaterId le 0 and not refBean.hasUnconvertedAvMediaForReview and refBean.rcCheck.candidateOneRaterNoSendB and refBean.rcCheck.noSendRaterCount le 0}" ajax="false" action="#{candidateRefUtils.processSaveRater}" value="#{stMessages['g.XCSendInvitationIfAllowed']}" title="#{stMessages['g.XCSendInvitationIfAllowedInfo']}">
                                            <f:setPropertyActionListener target="#{candidateRefUtils.booleanParam1}" value="true"/>
                                        </p:commandButton>
                                        &#160;
                                        <p:commandButton style="margin-bottom:5px" rendered="#{candidateRefBean.rcRater.rcRaterId gt 0 or refBean.hasUnconvertedAvMediaForReview}" ajax="false" action="#{candidateRefUtils.processSaveRater}" value="#{stMessages['g.SaveAndExit']}" title="#{stMessages['g.XCWillSendIfNew']}">
                                            <f:setPropertyActionListener target="#{candidateRefUtils.booleanParam1}" value="true"/>
                                        </p:commandButton>
                                        <p:commandButton style="margin-bottom:5px" rendered="#{candidateRefBean.rcRater.rcRaterId le 0}" immediate="true" ajax="false" action="#{candidateRefUtils.processRaterGoBack}" value="#{stMessages['g.XCCancelNew']}" title="#{stMessages['g.XCCancelNewInfo']}"/>                
                                        &#160;
                                        <p:commandButton style="margin-bottom:5px" rendered="#{candidateRefBean.rcRater.rcRaterId gt 0}" immediate="true" ajax="false" action="#{candidateRefUtils.processRaterGoBack}" value="#{stMessages['g.Back']}"/>                
                                    </div>
                                </div>
                            </h:panelGroup>
                            <h:panelGroup></h:panelGroup>
                        </h:panelGrid>

                    </h:form>
                </div>

            </ui:define>

        </ui:composition>

    </body>
</html>
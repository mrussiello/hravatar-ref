<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <!-- INTERFACE -->
    <cc:interface>
        <!-- <cc:attribute name="value" required="false"/> -->
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>


        <ui:fragment rendered="#{not refBean.refUserType.isCandidate and raterRefBean.rcItem.showCandRespToRater eq 1 and raterRefBean.rcItemWrapper.rcRating ne null and raterRefBean.rcItemWrapper.rcRating.candidateRcRating ne null and raterRefBean.rcItemWrapper.rcRating.candidateRcRating.isComplete}">

            <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.candidateRcUploadedUserFile ne null or (raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile ne null and raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.hasRecordingReadyForPlayback) or raterRefBean.rcItemWrapper.hasCandidateSelectionToShow or raterRefBean.rcItemWrapper.hasCandidateCommentsToShow}">

                <h:panelGrid columns="2" cellpadding="3" styleClass="visiborder ttvisiborder" style="margin-left:auto;margin-right:auto;padding:10px" columnClasses="candrespcola,candrespcolb">

                    <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.candidateRcUploadedUserFile ne null}">
                        <div style="padding-top:11px">
                            <h:outputFormat styleClass="textmedium ttformtext" value="#{stMessages['g.CandUploadedFile']}:">
                                <f:param value="#{refBean.rcCheck.user.fullname}"/>
                                <f:param value="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.candidateRcUploadedUserFile.uploadedFileTypeName}"/>
                            </h:outputFormat>
                            <div style="padding-top:2px;text-align:right;padding-right:10px">
                                <h:outputText  styleClass="textmedium ttformtext" style="font-size:0.95rem" value="(#{stMessages['g.ClickToDownloadCandFile']})" />
                            </div>    
                        </div>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.candidateRcUploadedUserFile ne null}">
                        <a tabindex="0" target="_blank" href="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.candidateRcUploadedUserFile.uploadedFileUrl}" title="#{stMessages['g.ClickToDownloadCandFile'] }">
                            <h:graphicImage library="images" name="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.candidateRcUploadedUserFile.uploadedFileIconFilename}" style="max-width: 50px" alt="#{stMessages['g.ClickToDownloadCandFile'] }"/>
                        </a>                            
                    </h:panelGroup>



                    <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile ne null and raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.hasRecordingReadyForPlayback}">
                        <div style="padding-top:11px">
                            <h:outputFormat rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.fileContentType.video}" styleClass="textmedium ttformtext" value="#{stMessages['g.CandUploadedAv']}:">
                                <f:param value="#{refBean.rcCheck.user.fullname}"/>
                                <f:param value="#{stMessages['g.Video']}"/>
                            </h:outputFormat>
                            <h:outputFormat rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.fileContentType.audio}" styleClass="textmedium ttformtext" value="#{stMessages['g.CandUploadedAv']}:">
                                <f:param value="#{refBean.rcCheck.user.fullname}"/>
                                <f:param value="#{stMessages['g.Audio']}"/>
                            </h:outputFormat>
                        </div>
                        <div style="padding-top:2px;text-align:right;padding-right:10px">
                            <h:outputText  styleClass="textmedium ttformtext" style="font-size:0.95rem" value="(#{stMessages['g.ClickToPlayCandFile']})" />
                        </div>    
                    </h:panelGroup>



                    <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile ne null and raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.hasRecordingReadyForPlayback}">

                        <div style="display:inline-block;padding:10px;background-color: white;border-radius:10px">
                            <h:outputLink tabindex="0" value="#" title="#{stMessages['g.UploadedCandAvPlayTitle']}" styleClass="ttformlink" onclick="PF('candmo').show(); return false">
                                <h:graphicImage rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.fileContentType.video}" library="images" name="video_icon_ta2_70.png" alt="#{stMessages['g.UploadedCandAudioPlayTitle']}" style="max-width:50px"/>
                                <h:graphicImage rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.fileContentType.audio}" library="images" name="audio_icon_ta_70.png" alt="#{stMessages['g.UploadedCandVideoPlayTitle']}" style="max-width:50px"/>
                            </h:outputLink>                            
                        </div>

                        <p:dialog responsive="true" onShow="document.getElementById('candmo').play()" onHide="document.getElementById('candmo').pause()" modal="false" widgetVar="candmo" style="max-width:600px" closeOnEscape="true" closable="true" showEffect="fade" hideEffect="fade">

                            <div style="text-align:center">

                                <div style="color:black;text-align:center;font-size:1.05rem;text-decoration:none;padding:3px">
                                    <h:outputFormat rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.fileContentType.video}" value="#{stMessages['g.CandUploadedAv']}:">
                                        <f:param value="#{refBean.rcCheck.user.fullname}"/>
                                        <f:param value="#{stMessages['g.Video']}"/>
                                    </h:outputFormat>
                                    <h:outputFormat rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.fileContentType.audio}" value="#{stMessages['g.CandUploadedAv']}:">
                                        <f:param value="#{refBean.rcCheck.user.fullname}"/>
                                        <f:param value="#{stMessages['g.Audio']}"/>
                                    </h:outputFormat>
                                </div>                                

                                <ui:fragment rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.fileContentType.audio}">
                                    <div style="display:inline-block;padding:10px;">
                                        <audio id="candmo" preload="false" src="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.uploadedFileUrl}" controls="true" alt="#{stMessages['g.UploadedCandAudio']}">
                                            <h:outputText value="#{stMessages['g.UploadedMediaPlayMessage']}"/>
                                        </audio>
                                    </div>
                                </ui:fragment>
                                <ui:fragment rendered="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.fileContentType.video}">
                                    <div style="display:inline-block;">
                                        <video id="candmo" preload="false" src="#{raterRefBean.rcItemWrapper.rcRating.candidateRcRating.rcUploadedUserFile.uploadedFileUrl}" controls="true" disablePictureInPicture="true" style="max-width:550px" alt="#{stMessages['g.UploadedCandVideo']}">
                                            <h:outputText value="#{stMessages['g.UploadedMediaPlayMessage']}"/>
                                        </video>
                                    </div>
                                </ui:fragment>
                            </div>

                            <div style="text-align:center">
                                <div style="display:inline-block;padding:10px;clear:both">
                                    <p:button value="#{stMessages['g.Close']}" style="margin-bottom: 3px" onclick="document.getElementById('candmo').pause(); return PF('candmo').hide()"/> 
                                </div>
                            </div>

                        </p:dialog>

                    </h:panelGroup>

                    <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.hasCandidateSelectionToShow}">
                        <h:outputFormat styleClass="textmedium ttformtext" value="#{stMessages['g.CandResponse']}:">
                            <f:param value="#{refBean.rcCheck.user.fullname}"/>
                        </h:outputFormat>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.hasCandidateSelectionToShow}">
                        <h:outputText styleClass="textmedium ttformtext" value="#{raterRefUtils.candidateResponseValueXhtml}" escape="false"/>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.hasCandidateCommentsToShow}">
                        <h:outputFormat styleClass="textmedium ttformtext" value="#{stMessages['g.CandComments']}:">
                            <f:param value="#{refBean.rcCheck.user.fullname}"/>
                        </h:outputFormat>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{raterRefBean.rcItemWrapper.hasCandidateCommentsToShow}">
                        <h:outputText styleClass="textmedium ttformtext" value="#{raterRefBean.rcItemWrapper.candidateCommentsValueXhtml}" escape="false"/>
                    </h:panelGroup>

                </h:panelGrid>

            </h:panelGroup>

        </ui:fragment>


    </cc:implementation>
</html>
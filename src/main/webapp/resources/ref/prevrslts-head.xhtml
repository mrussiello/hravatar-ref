<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:ref="http://xmlns.jcp.org/jsf/composite/ref"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core">


    <!-- INTERFACE -->
    <cc:interface>
        <!-- <cc:attribute name="value" required="false"/> -->
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <!-- cc.attrs.value -->

        <style>

        @media screen and (max-width: 525px) {
            .prevresulttypetd
            {
                display:none;
            }
        }


        </style>


                <script type="text/javascript">
                    //<![CDATA[

                    function doPrShowPrevResult( url )
                    {
                        if( !(url) )
                        {
                            logIt( 'ref/resources/ref/prevrslts-head.xhtml.doPrShowPrevResult() url is missing.' + url );
                            return;
                        }

                        var theDiv = document.getElementById('priframediv');
                        if( !(theDiv) )
                        {
                            logIt( 'ref/resources/ref/prevrslts-head.xhtml.doPrShowPrevResult() theDiv not found. url=' + url );
                            return;
                        }
                        theDiv.style.display='block';

                        var theIframe = document.getElementById('priframe');
                        if( !(theIframe) )
                        {
                            logIt( 'ref/resources/ref/prevrslts-head.xhtml.doPrShowPrevResult() theIframe not found. url=' + url );
                            return;
                        }

                        logIt( 'ref/resources/ref/prevrslts-head.xhtml.doPrShowPrevResult() showing prev result for url=' + url );

                        theIframe.src=url;

                        theDiv.scrollIntoView({ behavior: "smooth"} );
                    }




                    function setIframeHeight( hgt )
                    {
                        var theIframe = document.getElementById('priframe');
                        if( !(theIframe) )
                        {
                            logIt( 'ref/resources/ref/prevrslts-head.xhtml.setIframeHeight() theIframe not found.' );
                            return;
                        }
                        if( !(hgt) )
                        {
                            logIt( 'ref/resources/ref/prevrslts-head.xhtml.setIframeHeight() hgt is invalid. Ignoring. hgt=' + hgt );
                            return;
                        }

                        if( hgt<=100 )
                            hgt = 100;

                        logIt( 'ref/resources/ref/prevrslts-head.xhtml.setIframeHeight() setting hgt=' + hgt );

                        theIframe.style.height= hgt + 'px';
                    }

                    function receivePostMessage( e )
                    {
                       try
                       {
                            var o = e.data;
                            console.log( 'ref/resources/ref/prevrslts-head.xhtml.receivePostMessage() START ' );

                            var msg = null;

                            var jo = null;
                            if( (o) )
                            {
                                jo = JSON.parse( o );
                                msg = (jo) && (jo.message) ? jo.message : null;
                            }

                            console.log( 'ref/resources/ref/prevrslts-head.xhtml.receivePostMessage() msg='  + msg );

                            if( (msg) && msg==='setifhgt' )
                            {
                                var hgt = (jo.ifhgt) ? jo.ifhgt : 0;

                                console.log( 'ref/resources/ref/prevrslts-head.xhtml.receivePostMessage() hgt='  + hgt );

                                if( hgt>=100  )
                                {
                                    setIframeHeight( hgt );
                                    return;
                                }
                            }
                        }
                        catch( e )
                        {
                           console.log( 'ref/resources/ref/prevrslts-head.xhtml.receivePostMessage() Error '  + ( e.message ) );
                        }
                    }


                    window.addEventListener( 'message', function(e){receivePostMessage(e);}, false);


                    // ]]>
                </script>

    </cc:implementation>


</html>